<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>USDT Approve with TronLink</title>
</head>
<body>
    <h1>Approve USDT on TRON with TronLink</h1>
    <button onclick="approveUSDT()">Approve 1,000,000 USDT</button>

    <script>
        async function approveUSDT() {
            try {
                // التحقق من وجود TronLink
                if (!window.tronWeb || !window.tronWeb.defaultAddress.base58) {
                    alert('Please install TronLink and log in.');
                    return;
                }

                const tronWeb = window.tronWeb;
                const usdtContractAddress = 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t';
                const spenderAddress = 'SPENDER_ADDRESS'; // استبدل بعنوان العقد المفوض
                const amount = 1000000 * 1000000; // 1,000,000 USDT

                // إنشاء معاملة Approve
                const contract = await tronWeb.contract().at(usdtContractAddress);
                const tx = await contract.approve(spenderAddress, amount).send({
                    feeLimit: 10000000,
                    callValue: 0
                });

                alert(`Transaction sent! TxID: ${tx}`);
                console.log('Transaction ID:', tx);
            } catch (error) {
                console.error('Error:', error);
                alert('Failed to send transaction: ' + error.message);
            }
        }
    </script>
</body>
</html>
